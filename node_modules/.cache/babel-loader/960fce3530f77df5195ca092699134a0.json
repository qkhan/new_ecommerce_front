{"ast":null,"code":"var _jsxFileName = \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/admin/UpdateProduct.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from '../auth';\nimport { Link } from \"react-router-dom\";\nimport { getProduct, getCategories, updateProduct } from './apiAdmin';\n\nconst UpdateProduct = ({\n  match\n}) => {\n  console.log(\"Hello Qaisar, I am in product section\");\n  const {\n    user,\n    token\n  } = isAuthenticated();\n  const [values, setValues] = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n    redirectToProfile: false,\n    formData: ''\n  });\n  const {\n    name,\n    description,\n    price,\n    categories,\n    category,\n    shipping,\n    quantity,\n    photo,\n    loading,\n    error,\n    createdProduct,\n    redirectToProfile,\n    formData\n  } = values;\n\n  const init = productId => {\n    getProduct(productId).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        console.log(data); //populate the useState\n\n        setValues({ ...values,\n          name: data.name,\n          description: data.description,\n          price: data.price,\n          category: data.category._id,\n          shipping: data.shipping,\n          quantity: data.quantity,\n          formData: new FormData()\n        }); //load Categories\n\n        initCategories();\n      }\n    });\n  }; //load categories and set form Form\n\n\n  const initCategories = () => {\n    getCategories().then(data => {\n      setValues({\n        categories: data,\n        formData: new FormData()\n      });\n    });\n  };\n\n  useEffect(() => {\n    init(match.params.productId);\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: \"\",\n      loading: true\n    });\n    updateProduct(match.params.productId, user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          name: \"\",\n          description: \"\",\n          photo: \"\",\n          price: \"\",\n          quantity: \"\",\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    });\n  };\n\n  const newPostForm = () => React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Post Photo\"), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange('photo'),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    onChange: handleChange('name'),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"input\", {\n    onChange: handleChange('description'),\n    type: \"text\",\n    className: \"form-control\",\n    value: description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"input\", {\n    onChange: handleChange('price'),\n    type: \"text\",\n    className: \"form-control\",\n    value: price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Category\"), React.createElement(\"select\", {\n    onChange: handleChange('category'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"Please Select\"), categories && categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"input\", {\n    onChange: handleChange('quantity'),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"Shipping\"), React.createElement(\"select\", {\n    onChange: handleChange('shipping'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"Please Select\"), React.createElement(\"option\", {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"No\"), React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"Yes\"))), React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Create Product\"));\n\n  const showError = () => React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, error);\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdProduct ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, `${createdProduct}`, \" is created!\"));\n\n  const showLoading = () => loading && React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Loading...\"));\n\n  return React.createElement(Layout, {\n    title: \"Add a new product\",\n    description: `G'day ${user.name}, ready to add a new product?`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, showLoading(), showSuccess(), showError(), newPostForm())));\n};\n\nexport default UpdateProduct;","map":{"version":3,"sources":["/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/admin/UpdateProduct.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","getProduct","getCategories","updateProduct","UpdateProduct","match","console","log","user","token","values","setValues","name","description","price","categories","category","shipping","quantity","photo","loading","error","createdProduct","redirectToProfile","formData","init","productId","then","data","_id","FormData","initCategories","params","handleChange","event","value","target","files","set","clickSubmit","preventDefault","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from '../auth';\nimport { Link } from \"react-router-dom\";\nimport {getProduct, getCategories, updateProduct} from './apiAdmin';\n\nconst UpdateProduct = ({match}) => {\n  console.log(\"Hello Qaisar, I am in product section\")\n  const { user, token } = isAuthenticated();\n  const [values, setValues] = useState({\n      name : '',\n      description : '',\n      price : '',\n      categories : [],\n      category : '',\n      shipping : '',\n      quantity : '',\n      photo : '',\n      loading : false,\n      error : '',\n      createdProduct : '',\n      redirectToProfile : false,\n      formData : ''\n  })\n\n  const {\n      name,\n      description,\n      price,\n      categories,\n      category,\n      shipping,\n      quantity,\n      photo,\n      loading,\n      error,\n      createdProduct,\n      redirectToProfile,\n      formData\n  } = values;\n\n  const init = (productId) => {\n    getProduct(productId).then(data => {\n      if(data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        console.log(data)\n         //populate the useState\n         setValues({\n           ...values,\n           name: data.name,\n           description: data.description,\n           price: data.price,\n           category: data.category._id,\n           shipping: data.shipping,\n           quantity: data.quantity,\n           formData: new FormData()\n         })\n         //load Categories\n         initCategories()\n      }\n\n    })\n  }\n\n\n  //load categories and set form Form\n  const initCategories = () => {\n    getCategories().then(data => {\n        setValues({ categories: data, formData: new FormData()})\n    })\n  }\n\n\n  useEffect(() => {\n    init(match.params.productId);\n  }, []);\n\n  const handleChange = name => event => {\n    const value =\n      name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({...values, [name]: value});\n  }\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\", loading: true });\n\n    updateProduct(match.params.productId, user._id, token, formData)\n    .then(data => {\n      if (data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({\n          ...values,\n          name: \"\",\n          description: \"\",\n          photo: \"\",\n          price: \"\",\n          quantity: \"\",\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    })\n\n  }\n\n  const newPostForm = () => (\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\n      <h4>Post Photo</h4>\n      <div className=\"form-group\">\n        <label className=\"btn btn-secondary\">\n          <input\n            onChange={handleChange('photo')}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image/*\"\n          />\n        </label>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange('name')}\n          type=\"text\"\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Description</label>\n        <input\n          onChange={handleChange('description')}\n          type=\"text\"\n          className=\"form-control\"\n          value={description}\n        />\n      </div>\n\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Price</label>\n        <input\n          onChange={handleChange('price')}\n          type=\"text\"\n          className=\"form-control\"\n          value={price}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Category</label>\n        <select\n          onChange={handleChange('category')}\n          className=\"form-control\"\n        >\n          <option>Please Select</option>\n          {categories &&\n              categories.map((c, i) => (\n                <option key={i} value={c._id}>{c.name}</option>\n              ))\n          }\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Quantity</label>\n        <input\n          onChange={handleChange('quantity')}\n          type=\"number\"\n          className=\"form-control\"\n          value={quantity}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Shipping</label>\n        <select\n          onChange={handleChange('shipping')}\n          className=\"form-control\"\n        >\n          <option>Please Select</option>\n          <option value=\"0\">No</option>\n          <option value=\"1\">Yes</option>\n        </select>\n      </div>\n\n      <button className=\"btn btn-outline-primary\">Create Product</button>\n\n    </form>\n  );\n\n  const showError = () => (\n      <div className=\"alert alert-danger\" style={{display: error ? ''  : 'none' }}>\n        {error}\n      </div>\n  )\n\n  const showSuccess = () => (\n      <div className=\"alert alert-info\" style={{display: createdProduct ? ''  : 'none' }}>\n        <h2>{`${createdProduct}`} is created!</h2>\n      </div>\n  )\n\n  const showLoading = () =>\n    loading && (\n      <div className=\"alert alert-success\">\n        <h2>Loading...</h2>\n      </div>\n    );\n\n  return (\n    <Layout\n      title=\"Add a new product\"\n      description={`G'day ${user.name}, ready to add a new product?`}\n    >\n      <div className=\"row\">\n        <div className=\"col-md-8 offset-md-2\">\n        {showLoading()}\n        {showSuccess()}\n        {showError()}\n        {newPostForm()}\n        </div>\n      </div>\n    </Layout>\n  );\n\n};\n\n\nexport default UpdateProduct;\n"]},"metadata":{},"sourceType":"module"}