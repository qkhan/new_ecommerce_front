{"ast":null,"code":"var _jsxFileName = \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/core/Search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getCategories, list } from './apiCore';\nimport Card from './Card';\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  });\n  const {\n    categories,\n    category,\n    search,\n    results,\n    searched\n  } = data;\n\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({ ...data,\n          categories: data\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const handleChange = name => event => {\n    setData({ ...data,\n      [name]: event.target.value,\n      searched: false\n    });\n  };\n\n  const searchData = () => {\n    console.log(\"search:\", search, \"category: \", category);\n\n    if (search) {\n      list({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          console.log(\"response from search\");\n          console.log(response);\n          setData({ ...data,\n            results: response,\n            searched: true\n          });\n        }\n      });\n    }\n  };\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products`;\n    }\n\n    if (searched && results.length < 1) {\n      return `No products found`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mt-4 mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, searchMessage(searched, results)), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, results.map((product, i) => React.createElement(Card, {\n      key: i,\n      product: product,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }))));\n  };\n\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const searchForm = () => React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange(\"category\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"All\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Pick Category\"), categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange(\"search\"),\n    placeholder: \"Search by name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Search\"))));\n\n  return React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, searchForm()), React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, searchedProducts(results)));\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/core/Search.js"],"names":["React","useState","useEffect","getCategories","list","Card","Search","data","setData","categories","category","search","results","searched","loadCategories","then","error","console","log","handleChange","name","event","target","value","searchData","undefined","response","searchMessage","length","searchedProducts","map","product","i","searchSubmit","e","preventDefault","searchForm","c","_id","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getCategories, list } from './apiCore';\nimport Card from './Card';\n\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  });\n\n  const { categories, category, search, results, searched } = data;\n\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({...data, categories: data});\n      }\n    });\n  }\n\n  useEffect(() => {\n    loadCategories()\n  }, [])\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value, searched: false });\n  };\n\n  const searchData = () => {\n    console.log(\"search:\" , search, \"category: \", category);\n    if (search) {\n      list({search: search || undefined, category: category})\n        .then(response => {\n          if (response.error) {\n            console.log(response.error);\n          }else {\n            console.log(\"response from search\");\n            console.log(response);\n            setData({...data, results: response, searched: true})\n          }\n        })\n    }\n\n  };\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products`;\n    }\n    if (searched && results.length < 1) {\n      return `No products found`;\n    }\n  }\n\n  const searchedProducts = (results = []) => {\n    return (\n      <div>\n        <h2 className=\"mt-4 mb-4\">\n          {searchMessage(searched, results)}\n        </h2>\n        <div className=\"row\">\n          {results.map((product, i) => (\n            <Card key={i} product={product} />\n          ))}\n        </div>\n      </div>\n  );\n  }\n\n\n  const searchSubmit = (e) => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const searchForm = () => (\n    <form onSubmit={searchSubmit}>\n      <span className=\"input-group-text\">\n        <div className=\"input-group input-group-lg\">\n          <div className=\"input-group-prepend\">\n            <select\n              className=\"btn mr-2\"\n              onChange={handleChange(\"category\")}\n            >\n              <option value=\"All\">Pick Category</option>\n              {categories.map((c, i) => (\n                <option key={i} value={c._id}>{c.name}</option>\n              ))}\n            </select>\n          </div>\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              onChange={handleChange(\"search\")}\n              placeholder=\"Search by name\"\n            />\n        </div>\n        <div\n          className=\"btn input-group-append\"\n          style={{ border: \"none\"}}\n        >\n        <button className=\"input-group-text\">Search</button>\n      </div>\n    </span>\n    </form>\n  );\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"container\">\n        {searchForm()}\n      </div>\n      <div className=\"container-fluid\">\n      {searchedProducts(results)}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}