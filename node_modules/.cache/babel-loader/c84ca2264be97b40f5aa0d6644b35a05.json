{"ast":null,"code":"import _defineProperty from \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/core/Search.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { getCategories, list } from './apiCore';\nimport { Card } from './Card';\n\nconst Search = () => {\n  const _useState = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const categories = data.categories,\n        category = data.category,\n        search = data.search,\n        results = data.results,\n        searched = data.searched;\n\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData(_objectSpread({}, data, {\n          categories: data\n        }));\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const handleChange = name => event => {\n    setData(_objectSpread({}, data, {\n      [name]: event.target.value,\n      searched: false\n    }));\n  };\n\n  const searchData = () => {\n    console.log(\"search:\", search, \"category: \", category);\n\n    if (search) {\n      list({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          console.log(\"response from search\");\n          console.log(response);\n          setData(_objectSpread({}, data, {\n            results: response,\n            searched: true\n          }));\n        }\n      });\n    }\n  };\n\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const searchForm = () => React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange(\"category\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"All\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Pick Category\"), categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange(\"search\"),\n    placeholder: \"Search by name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Search\"))));\n\n  return React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, searchForm(), JSON.stringify(results)));\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/core/Search.js"],"names":["React","useState","useEffect","getCategories","list","Card","Search","categories","category","search","results","searched","data","setData","loadCategories","then","error","console","log","handleChange","name","event","target","value","searchData","undefined","response","searchSubmit","e","preventDefault","searchForm","map","c","i","_id","border","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getCategories, list } from './apiCore';\nimport { Card } from './Card';\n\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  });\n\n  const { categories, category, search, results, searched } = data;\n\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({...data, categories: data});\n      }\n    });\n  }\n\n  useEffect(() => {\n    loadCategories()\n  }, [])\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value, searched: false });\n  };\n\n  const searchData = () => {\n    console.log(\"search:\" , search, \"category: \", category);\n    if (search) {\n      list({search: search || undefined, category: category})\n        .then(response => {\n          if (response.error) {\n            console.log(response.error);\n          }else {\n            console.log(\"response from search\");\n            console.log(response);\n            setData({...data, results: response, searched: true})\n          }\n        })\n    }\n\n  };\n\n  const searchSubmit = (e) => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const searchForm = () => (\n    <form onSubmit={searchSubmit}>\n      <span className=\"input-group-text\">\n        <div className=\"input-group input-group-lg\">\n          <div className=\"input-group-prepend\">\n            <select\n              className=\"btn mr-2\"\n              onChange={handleChange(\"category\")}\n            >\n              <option value=\"All\">Pick Category</option>\n              {categories.map((c, i) => (\n                <option key={i} value={c._id}>{c.name}</option>\n              ))}\n            </select>\n          </div>\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              onChange={handleChange(\"search\")}\n              placeholder=\"Search by name\"\n            />\n        </div>\n        <div\n          className=\"btn input-group-append\"\n          style={{ border: \"none\"}}\n        >\n        <button className=\"input-group-text\">Search</button>\n      </div>\n    </span>\n    </form>\n  );\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"container\">\n        {searchForm()}\n        {JSON.stringify(results)}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}