{"ast":null,"code":"import _defineProperty from \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/admin/AddProduct.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from '../auth';\nimport { Link } from \"react-router-dom\";\nimport { createProduct, getCategories } from './apiAdmin';\n\nconst AddProduct = () => {\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const _useState = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n    redirectToProfile: false,\n    formData: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const name = values.name,\n        description = values.description,\n        price = values.price,\n        categories = values.categories,\n        category = values.category,\n        shipping = values.shipping,\n        quantity = values.quantity,\n        photo = values.photo,\n        loading = values.loading,\n        error = values.error,\n        createdProduct = values.createdProduct,\n        redirectToProfile = values.redirectToProfile,\n        formData = values.formData; //load categories and set form Form\n\n  const init = () => {\n    getCategories().then(data => {\n      setValues(_objectSpread({}, values, {\n        categories: data,\n        formData: new FormData()\n      }));\n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues(_objectSpread({}, values, {\n      [name]: value\n    }));\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues(_objectSpread({}, values, {\n      error: \"\",\n      loading: true\n    }));\n    createProduct(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          name: \"\",\n          description: \"\",\n          photo: \"\",\n          price: \"\",\n          quantity: \"\",\n          loading: false,\n          createdProduct: data.name\n        }));\n      }\n    });\n  };\n\n  const newPostForm = () => React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Post Photo\"), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange('photo'),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    onChange: handleChange('name'),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"input\", {\n    onChange: handleChange('description'),\n    type: \"text\",\n    className: \"form-control\",\n    value: description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"input\", {\n    onChange: handleChange('price'),\n    type: \"text\",\n    className: \"form-control\",\n    value: price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Category\"), React.createElement(\"select\", {\n    onChange: handleChange('category'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Please Select\"), categories && categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"input\", {\n    onChange: handleChange('quantity'),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Shipping\"), React.createElement(\"select\", {\n    onChange: handleChange('shipping'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"Please Select\"), React.createElement(\"option\", {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"No\"), React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Yes\"))), React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Create Product\"));\n\n  const showError = () => React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, error);\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdProduct ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, \"\".concat(createdProduct), \" is created!\"));\n\n  const showLoading = () => loading && React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"Loading...\"));\n\n  return React.createElement(Layout, {\n    title: \"Add a new product\",\n    description: \"G'day \".concat(user.name, \", ready to add a new product?\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, showLoading(), showSuccess(), showError(), newPostForm())));\n};\n\nexport default AddProduct;","map":{"version":3,"sources":["/Users/qaisar/Desktop/React_Ecommerce/ecommerce_front/src/admin/AddProduct.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","createProduct","getCategories","AddProduct","user","token","name","description","price","categories","category","shipping","quantity","photo","loading","error","createdProduct","redirectToProfile","formData","values","setValues","init","then","data","FormData","handleChange","event","value","target","files","set","clickSubmit","preventDefault","_id","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from '../auth';\nimport { Link } from \"react-router-dom\";\nimport {createProduct, getCategories} from './apiAdmin';\n\nconst AddProduct = () => {\n  const { user, token } = isAuthenticated();\n  const [values, setValues] = useState({\n      name : '',\n      description : '',\n      price : '',\n      categories : [],\n      category : '',\n      shipping : '',\n      quantity : '',\n      photo : '',\n      loading : false,\n      error : '',\n      createdProduct : '',\n      redirectToProfile : false,\n      formData : ''\n  })\n\n  const {\n      name,\n      description,\n      price,\n      categories,\n      category,\n      shipping,\n      quantity,\n      photo,\n      loading,\n      error,\n      createdProduct,\n      redirectToProfile,\n      formData\n  } = values;\n\n  //load categories and set form Form\n  const init = () => {\n    getCategories().then(data => {\n        setValues({...values, categories: data, formData: new FormData()})\n    })\n  }\n\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleChange = name => event => {\n    const value =\n      name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({...values, [name]: value});\n  }\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\", loading: true });\n\n    createProduct(user._id, token, formData)\n    .then(data => {\n      if (data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({\n          ...values,\n          name: \"\",\n          description: \"\",\n          photo: \"\",\n          price: \"\",\n          quantity: \"\",\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    })\n\n  }\n\n  const newPostForm = () => (\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\n      <h4>Post Photo</h4>\n      <div className=\"form-group\">\n        <label className=\"btn btn-secondary\">\n          <input\n            onChange={handleChange('photo')}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image/*\"\n          />\n        </label>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange('name')}\n          type=\"text\"\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Description</label>\n        <input\n          onChange={handleChange('description')}\n          type=\"text\"\n          className=\"form-control\"\n          value={description}\n        />\n      </div>\n\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Price</label>\n        <input\n          onChange={handleChange('price')}\n          type=\"text\"\n          className=\"form-control\"\n          value={price}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Category</label>\n        <select\n          onChange={handleChange('category')}\n          className=\"form-control\"\n        >\n          <option>Please Select</option>\n          {categories &&\n              categories.map((c, i) => (\n                <option key={i} value={c._id}>{c.name}</option>\n              ))\n          }\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Quantity</label>\n        <input\n          onChange={handleChange('quantity')}\n          type=\"number\"\n          className=\"form-control\"\n          value={quantity}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Shipping</label>\n        <select\n          onChange={handleChange('shipping')}\n          className=\"form-control\"\n        >\n          <option>Please Select</option>\n          <option value=\"0\">No</option>\n          <option value=\"1\">Yes</option>\n        </select>\n      </div>\n\n      <button className=\"btn btn-outline-primary\">Create Product</button>\n\n    </form>\n  );\n\n  const showError = () => (\n      <div className=\"alert alert-danger\" style={{display: error ? ''  : 'none' }}>\n        {error}\n      </div>\n  )\n\n  const showSuccess = () => (\n      <div className=\"alert alert-info\" style={{display: createdProduct ? ''  : 'none' }}>\n        <h2>{`${createdProduct}`} is created!</h2>\n      </div>\n  )\n\n  const showLoading = () =>\n    loading && (\n      <div className=\"alert alert-success\">\n        <h2>Loading...</h2>\n      </div>\n    );\n\n  return (\n    <Layout\n      title=\"Add a new product\"\n      description={`G'day ${user.name}, ready to add a new product?`}\n    >\n      <div className=\"row\">\n        <div className=\"col-md-8 offset-md-2\">\n        {showLoading()}\n        {showSuccess()}\n        {showError()}\n        {newPostForm()}\n        </div>\n      </div>\n    </Layout>\n  );\n\n};\n\n\nexport default AddProduct;\n"]},"metadata":{},"sourceType":"module"}